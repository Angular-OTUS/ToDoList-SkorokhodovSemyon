<div class="todo-card">
  <h1 class="todo-card__title">Todo List</h1>

  <div class="todo-card__main-content">

    <div class="todo-card__list-wrapper">
      @if (!isLoading()) {
        <ul class="task-list">
          @for (task of taskList(); track task.id) {
            <app-to-do-list-item
              class="task-list__item"
              appTooltip="Кликни, чтобы показать описание задачи"
              [item]="task"
              (click)="selectTaskHandler(task)"
              (remove)="removeTaskHandler($event)"
              [class.selected]="selectedTask()?.id === task.id"
            >
            </app-to-do-list-item>
          } @empty {
            <p class="task-list__empty-message">Список задач пуст</p>
          }
        </ul>
      } @else {
        <div class="spinner-container">
          <mat-spinner></mat-spinner>
        </div>
      }
      <div class="add-form">
        <mat-form-field class="add-form__input-field" appearance="outline">
          <mat-label>Название задачи</mat-label>
          <input
            matInput
            type="text"
            placeholder="Название задачи"
            [(ngModel)]="newTaskTitle"
          />
        </mat-form-field>

        <mat-form-field class="add-form__input-field" appearance="outline">
          <mat-label>Описание задачи</mat-label>
          <textarea
            matInput
            rows="4"
            placeholder="Описание задачи"
            [(ngModel)]="newTaskDescription"
          ></textarea>
        </mat-form-field>
        <app-button
          appTooltip="Добавить задачу"
          (click)="addTaskHandler()"
          [disabled]="!newTaskTitle.trim() || !newTaskDescription.trim()"
          [title]="'Добавить'"
          [typeButton]="'add'"
        >
        </app-button>
      </div>
    </div>

    @if (selectedTask() !== null) {
      <div class="todo-card__description-wrapper">
        <div class="description-content">
          <h2 class="description-content_">Описание задачи</h2>
          <p class="description-content__text">
            {{ selectedTask()!.description }}
          </p>
        </div>
      </div>
    }
  </div>
</div>
